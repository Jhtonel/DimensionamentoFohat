import React from "react";
import { Projeto } from "@/entities/Projeto";
import { Badge } from "@/components/ui/badge";
import { 
  Sparkles, 
  FileText, 
  Send, 
  MessageCircle, 
  CheckCircle, 
  Hammer, 
  Trophy,
  XCircle
} from "lucide-react";
import { motion } from "framer-motion";

const statusConfig = {
  lead: { label: "Lead", icon: Sparkles, color: "bg-gray-100 text-gray-700 border-gray-200" },
  dimensionamento: { label: "Dimensionamento", icon: FileText, color: "bg-blue-100 text-blue-700 border-blue-200" },
  orcamento_enviado: { label: "Orçamento Enviado", icon: Send, color: "bg-purple-100 text-purple-700 border-purple-200" },
  negociacao: { label: "Negociação", icon: MessageCircle, color: "bg-orange-100 text-orange-700 border-orange-200" },
  fechado: { label: "Fechado", icon: CheckCircle, color: "bg-green-100 text-green-700 border-green-200" },
  instalacao: { label: "Instalação", icon: Hammer, color: "bg-cyan-100 text-cyan-700 border-cyan-200" },
  concluido: { label: "Concluído", icon: Trophy, color: "bg-emerald-100 text-emerald-700 border-emerald-200" },
  perdido: { label: "Perdido", icon: XCircle, color: "bg-red-100 text-red-700 border-red-200" }
};

export default function PipelineBoard({ projetos, onUpdate }) {
  const groupByStatus = () => {
    const groups = {};
    Object.keys(statusConfig).forEach(status => {
      groups[status] = projetos.filter(p => p.status === status);
    });
    return groups;
  };

  const grouped = groupByStatus();
